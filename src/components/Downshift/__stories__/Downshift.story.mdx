import { Canvas, Meta, Story } from '@storybook/addon-docs';

<Meta title="ðŸ“– Component Docs/Downshift" />

# Downshift

> The `Downshift` is a normal text input enhanced by a panel of suggested options, that api base on `Mui` `autocomplete`, but implement with different a11y behaviors, and support with `virtual list`

[Go to this canvas](?path=/story/ðŸš€-cleanup-components-downshift--downshift)

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift" />
</Canvas>

## Autocomplete

We can use that downshift like a autocomplete

> Default options change will reset highlightedIndex to 0, you must only call that before options change

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-autocomplete" />
</Canvas>

## Custom Input render

- `renderInput`: Render the input, default is `RcTextField`

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-with-custom-input" />
</Canvas>

## Disabled item

By default, that options highlight will skip `disabled` item, if you still want highlight on disabled item,
set `disabledItemsHighlightable`.

- `disabledItemsHighlightable`: no skip disabled option highlight.

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-disabled" />
</Canvas>

## Custom render options

- `getOptionLabel`: Used to determine the string value for a given option.
  It's used to fill the input (and the list box options if `renderOption` is not provided).
- `renderOption`: Render the option, use `getOptionLabel` by default.

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-with-avatar" />
</Canvas>

## Better performance

Our virtualized List base on [virtuoso](https://virtuoso.dev/), that automatically handles content resizing.

if you have fixed item height, you can set `fixedItemHeight` to improve performance.
`fixedItemHeight`: Can be used to improve performance if the rendered items are of known size. Setting it causes the component to skip item measurements.

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-fixed-item-height" />
</Canvas>

## Group Items

- `groupBy`: If provided, the options will be grouped under the returned string. The groupBy value is also used as the text for group headings when `renderGroup` is not provided.
- `renderGroup`: Render the group title item, also with for toggle button props.
- `onGroupExpanded`: Trigger when group item expanded state change.

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-group-by" />
</Canvas>

## Debug with inspect the popup

`debug`: If `true`, the popup will ignore the blur event. You can inspect the popup markup with your browser tools. Consider this option when you need to customize the component.

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-debug" />
</Canvas>

## Lazyload items depend on scroll

You can custom `SuggestionListProps` with `rangeChanged` or `endReached` or `atBottomStateChange` to implement that,

**Remember** call `actionRef.current.keepHighlightedIndex();` before you change options.

> Default options change will reset highlightedIndex to 0, you must only call that before options change

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-lazy-load-examples" />
</Canvas>

## Disabled chrome autofill

When have some country or address label or others chrome support autofill
that will support auto fill address in input
if you not need should use `autoComplete="chrome-off"`
more detail https://developers.google.com/web/updates/2015/06/checkout-faster-with-autofill

<Canvas withSource="none">
  <Story id="ðŸš€-cleanup-components-downshift--downshift-group-by" />
</Canvas>
